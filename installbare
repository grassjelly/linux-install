#!/usr/bin/env bash

set -e

#install git
sudo apt-get install -y git

#install curl
sudo apt-get install -y curl

#install conda
wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh  

#install Docker
sudo apt install docker.io

#install visual studio code
wget -O vscode.deb https://go.microsoft.com/fwlink/?LinkID=760868
sudo dpkg -i vscode.deb
sudo apt-get install -f

#install google chrome
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
sudo dpkg -i google-chrome-stable_current_amd64.deb
sudo apt-get -f install -y

#install system-monitor
sudo apt install gnome-shell-extension-system-monitor
gnome-extensions enable system-monitor@paradoxxx.zero.gmail.com
killall -3 gnome-shell

#install gestures
#https://kaigo.medium.com/mac-like-gestures-on-ubuntu-20-04-dell-xps-15-7ea6e3be7f76
sudo apt install python3 python3-gi python-gobject meson xdotool libinput-tools gettext
sudo gpasswd -a $USER input
git clone https://github.com/bulletmark/libinput-gestures.git
cd libinput-gestures
sudo make install
sudo ./libinput-gestures-setup install
libinput-gestures-setup start
libinput-gestures-setup autostart
git clone https://gitlab.com/cunidev/gestures
cd gestures
meson build --prefix=/usr
ninja -C build
sudo ninja -C build install

echo "ip=\$(ip addr show wlan0 | grep -o 'inet [0-9]\+\.[0-9]\+\.[0-9]\+\.[0-9]\+' | grep -o [0-9].*)" >> ~/.bashrc
echo "export ROS_MASTER_URI=http://\$ip:11311"  >> ~/.bashrc
echo "export ROS_HOSTNAME=\$ip" >> ~/.bashrc

echo "alias helloconda=\". \$HOME/miniconda3/etc/profile.d/conda.sh\"" >> ~/.bashrc
echo "alias r2=\"source /opt/ros/foxy/setup.bash\"" >> ~/.bashrc
echo "alias r1=\"source /opt/ros/noetic/setup.bash\"" >> ~/.bashrc
